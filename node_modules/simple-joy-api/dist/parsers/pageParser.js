"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const postParser_1 = __importDefault(require("./Post/postParser"));
const Page_1 = __importDefault(require("../models/Page"));
class PageParser {
    parsePage($page) {
        const page = new Page_1.default();
        const postContainers = $page('.postContainer');
        postContainers.map((i, el) => {
            page.addPost(postParser_1.default.parsePost(el));
        });
        page.nextPage = PageParser.parsePageNumber($page, 'next');
        page.prevPage = PageParser.parsePageNumber($page, 'prev');
        return page;
    }
    static parsePageNumber($page, name) {
        const el = $page('.pagination_main > .' + name)[0];
        if (el && el.attribs.href) {
            const regex = el.attribs.href.match(/\/(\d+)$/);
            return regex ? Number(regex[1]) : null;
        }
        return null;
    }
}
exports.default = new PageParser();
